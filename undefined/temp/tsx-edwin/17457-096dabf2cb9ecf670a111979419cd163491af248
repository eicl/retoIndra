{"code":"(()=>{\nvar __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var SNSService_exports={};__export(SNSService_exports,{SNSService:()=>SNSService});module.exports=__toCommonJS(SNSService_exports);var import_aws_sdk=require(\"aws-sdk\");var import_env=require(\"../../config/env\");class SNSService{static{__name(this,\"SNSService\")}sns;constructor(){this.sns=new import_aws_sdk.SNS}async send(appointment){const topicArn=await this.getTopicArnByCountry(appointment.countryISO);if(!topicArn){console.warn(`No SNS Topic ARN found for country: ${appointment.countryISO}`);return}const params={Message:JSON.stringify(appointment),TopicArn:topicArn};await this.sns.publish(params).promise()}async getTopicArnByCountry(countryISO){let topicMap=\"\";switch(countryISO){case\"PE\":topicMap=\"\"+import_env.Env.SNS_ARN_PE;break;case\"CL\":topicMap=\"\"+import_env.Env.SNS_ARN_CL;break;default:topicMap=null;break}return topicMap}}0&&(module.exports={SNSService});\n})()\n","warnings":[],"map":{"version":3,"mappings":";suBAAA,sJAAoB,mBAEpB,eAAoB,4BAGb,MAAM,UAAW,CALxB,MAKwB,2BACd,IAER,aAAc,CACZ,KAAK,IAAM,IAAI,kBACjB,CAEA,MAAM,KAAK,YAAyC,CAClD,MAAM,SAAW,MAAM,KAAK,qBAAqB,YAAY,UAAU,EACvE,GAAI,CAAC,SAAU,CACb,QAAQ,KAAK,uCAAuC,YAAY,UAAU,EAAE,EAC5E,MACF,CAEA,MAAM,OAAS,CACb,QAAS,KAAK,UAAU,WAAW,EACnC,SAAU,QACZ,EAEA,MAAM,KAAK,IAAI,QAAQ,MAAM,EAAE,QAAQ,CACzC,CAEA,MAAM,qBAAqB,WAA2C,CACpE,IAAI,SAA0B,GAC7B,OAAQ,WAAY,CACnB,IAAK,KACH,SAAW,GAAK,eAAI,WACpB,MACF,IAAK,KACH,SAAW,GAAK,eAAI,WACpB,MACF,QACE,SAAW,KACX,KACH,CACD,OAAO,QACT,CACF","names":[],"ignoreList":[],"sources":["C:\\practicas\\fuentes\\medical-appointment-backend\\src\\infrastructure\\messaging\\SNSService.ts"],"sourcesContent":[null]}}